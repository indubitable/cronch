@model cronch.Models.ViewModels.JobViewModel

<div class="container text-start px-5">
    <div asp-validation-summary="All" class="rounded border border-2 border-danger"></div>
    <form method="post">
        <div class="row gx-5">
            <div class="col mb-3 d-flex align-items-center">
                <div class="flex-fill">
                    <label bs5-for="Name" class="form-label"></label>
                    <input bs5-for="Name" class="form-control" />
                    <span asp-validation-for="Name" class="text-danger"></span>
                </div>
            </div>
            <div class="col mb-3 d-flex align-items-center">
                <div class="shadow p-3 bg-body-tertiary rounded flex-fill">Choose a meaningful name for this job</div>
            </div>
        </div>
        <div class="row gx-5">
            <hr />
        </div>
        <div class="row gx-5">
            <div class="col mb-3 d-flex align-items-center">
                <div class="form-check flex-fill">
                    <input bs5-for="Enabled" class="form-check-input" />
                    <label asp-for="Enabled" class="form-check-label"></label>
                </div>
            </div>
            <div class="col mb-3 d-flex align-items-center">
                <div class="shadow p-3 bg-body-tertiary rounded flex-fill">Whether this job will be immediately enabled after saving</div>
            </div>
        </div>
        <div class="row gx-5">
            <hr />
        </div>
        <div class="row gx-5">
            <div class="col mb-3 d-flex align-items-center">
                <div class="flex-fill">
                    <label bs5-for="CronSchedule" class="form-label"></label>
                    <input bs5-for="CronSchedule" class="form-control cron-schedule-input" />
                    <span asp-validation-for="CronSchedule" class="text-danger"></span>
                </div>
            </div>
            <div class="col mb-3 d-flex align-items-center">
                <div class="shadow p-3 bg-body-tertiary rounded flex-fill">
                    <a target="_blank" href="https://github.com/HangfireIO/Cronos#cron-format">A six-part (with seconds) cron expression</a>
                    <br /><br />
                    Quick choices:
                    <a href="#" onclick="document.querySelector('.cron-schedule-input').value='*/30 * * * * *'; return false;">Every 30 seconds</a>
                    |
                    <a href="#" onclick="document.querySelector('.cron-schedule-input').value='0 * * * * *'; return false;">Every minute</a>
                    |
                    <a href="#" onclick="document.querySelector('.cron-schedule-input').value='0 0 0 * * MON-FRI'; return false;">At midnight Monday-Friday</a>
                </div>
            </div>
        </div>
        <div class="row gx-5">
            <hr />
        </div>
        <div class="row gx-5">
            <div class="col mb-3 d-flex align-items-center">
                <div class="flex-fill">
                    <label bs5-for="Executor" class="form-label"></label>
                    <input bs5-for="Executor" class="form-control executor-input" />
                    <span asp-validation-for="Executor" class="text-danger"></span>

                    <br /><br />

                    <label bs5-for="ExecutorArgs" class="form-label"></label>
                    <input bs5-for="ExecutorArgs" class="form-control executor-args-input" />
                    <span asp-validation-for="ExecutorArgs" class="text-danger"></span>
                </div>
            </div>
            <div class="col mb-3 d-flex align-items-center">
                <div class="shadow p-3 bg-body-tertiary rounded flex-fill">
                    <script type="text/javascript">
                        function setExecutor(execFile, execArgs) {
                            document.querySelector('.executor-input').value = execFile;
                            document.querySelector('.executor-args-input').value = execArgs;
                            return false;
                        }
                    </script>
                    The command that executes your script
                    <br /><br />
                    The command must have at least a <a target="_blank" href="https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.processstartinfo.filename">filename</a>, and optionally some <a target="_blank" href="https://learn.microsoft.com/en-us/dotnet/api/system.diagnostics.processstartinfo.arguments">arguments</a>.
                    <br /><br />
                    If <code>{0}</code> is present in the Arguments field, it is replaced with the script location. Otherwise, the script location is appended at the end.
                    <br /><br />
                    Quick choices:
                    <a href="#" onclick="return setExecutor('/usr/bin/env', 'bash -c');">Bash</a>
                    |
                    <a href="#" onclick="return setExecutor('/usr/bin/env', 'bash -l -c');">Bash (login shell)</a>
                    |
                    <a href="#" onclick="return setExecutor('/usr/bin/env', 'pwsh -NonInteractive -f');">PowerShell (Core)</a>
                    <br />
                    Windows only:
                    <a href="#" onclick="return setExecutor('C:\\Program Files\\Git\\bin\\bash.exe', '-c &quot;exec $(cygpath -u \'{0}\')&quot;');">Git Bash</a>
                    |
                    <a href="#" onclick="return setExecutor('cmd.exe', '/C');">cmd.exe</a>
                    |
                    <a href="#" onclick="return setExecutor('powershell.exe', '-NonInteractive -f');">Windows PowerShell</a>
                </div>
            </div>
        </div>
        <div class="row gx-5">
            <hr />
        </div>
        <div class="row gx-5">
            <div class="col mb-3 d-flex align-items-center">
                <div class="flex-fill">
                    <label bs5-for="Script" class="form-label"></label>
                    <textarea bs5-for="Script" rows="5" class="form-control"></textarea>
                    <span asp-validation-for="Script" class="text-danger"></span>
                </div>
            </div>
            <div class="col mb-3 d-flex align-items-center">
                <div class="shadow p-3 bg-body-tertiary rounded flex-fill">The script executed by the executor (see above)</div>
            </div>
        </div>
        <div class="row gx-5">
            <hr />
        </div>
        <div class="row gx-5">
            <div class="col mb-3 d-flex align-items-center">
                <div class="flex-fill">
                    <label bs5-for="ScriptFilePathname" class="form-label"></label>
                    <input bs5-for="ScriptFilePathname" class="form-control" />
                    <span asp-validation-for="ScriptFilePathname" class="text-danger"></span>
                </div>
            </div>
            <div class="col mb-3 d-flex align-items-center">
                <div class="shadow p-3 bg-body-tertiary rounded flex-fill">
                    Optional - the relative or absolute name of the script file that will be executed by the executor specified above and will contain the script contents specified above
                    <br /><br />
                    If left empty, a randomly generated filename will be created in the system temporary directory.
                </div>
            </div>
        </div>
        <div class="row gx-5">
            <hr />
        </div>
        <div class="row gx-5">
            <div class="col mb-3 d-flex align-items-center">
                <div class="flex-fill">
                    <label bs5-for="Keywords" class="form-label"></label>
                    <input bs5-for="Keywords" class="form-control" />
                    <span asp-validation-for="Keywords" class="text-danger"></span>
                </div>
            </div>
            <div class="col mb-3 d-flex align-items-center">
                <div class="shadow p-3 bg-body-tertiary rounded flex-fill">Optional - comma-separated list of keywords to look for in standard out and/or standard error processing (see below)</div>
            </div>
        </div>
        <div class="row gx-5">
            <hr />
        </div>
        <div class="row gx-5">
            <div class="col mb-3 d-flex align-items-center">
                <div class="flex-fill">
                    <label asp-for="StdOutProcessing" class="form-label"></label>
                    <select bs5-for="StdOutProcessing" bs5-items="cronch.Models.ViewModels.JobViewModel.ProcessingOptions" class="form-select"></select>
                </div>
            </div>
            <div class="col mb-3 d-flex align-items-center">
                <div class="shadow p-3 bg-body-tertiary rounded flex-fill">How to interpret the contents of stdout after each run</div>
            </div>
        </div>
        <div class="row gx-5">
            <hr />
        </div>
        <div class="row gx-5">
            <div class="col mb-3 d-flex align-items-center">
                <div class="flex-fill">
                    <label asp-for="StdErrProcessing" class="form-label"></label>
                    <select bs5-for="StdErrProcessing" bs5-items="cronch.Models.ViewModels.JobViewModel.ProcessingOptions" class="form-select"></select>
                </div>
            </div>
            <div class="col mb-3 d-flex align-items-center">
                <div class="shadow p-3 bg-body-tertiary rounded flex-fill">How to interpret the contents of stderr after each run</div>
            </div>
        </div>
        <br />
        <button type="submit" class="btn btn-primary">Save</button>
        <br /><br />
    </form>
</div>
